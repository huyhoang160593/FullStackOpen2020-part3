{"version":3,"sources":["components/Filter.js","components/PersonForm.js","services/persons.js","components/Button.js","components/Notification.js","App.js","index.js"],"names":["Filter","filter","handleFilter","value","onChange","PersonForm","addPhoneBook","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Button","handleClick","text","onClick","Notification","message","flag","className","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","found","setFound","setMessage","setFlag","useEffect","personService","initialPersons","chosenList","event","re","RegExp","console","log","target","person","name","match","number","preventDefault","personObject","Error","duplicate","find","window","confirm","returnedPerson","map","catch","error","setTimeout","createdPerson","concat","error1","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.635a275e.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({filter,handleFilter}) => {\r\n    return(\r\n        <div>\r\n          filter shown with <input \r\n            value={filter}\r\n            onChange={handleFilter}\r\n          />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({addPhoneBook,newName,handleNameChange,newNumber,handleNumberChange}) => {\r\n   return (\r\n    <div>\r\n        <form onSubmit={addPhoneBook}>\r\n            <div>\r\n                Name: <input \r\n                    value={newName}\r\n                    onChange={handleNameChange}\r\n                />\r\n            </div>\r\n            <div>\r\n                Number: <input \r\n                    value={newNumber} \r\n                    onChange={handleNumberChange}\r\n                />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n    \r\n   ) \r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from 'react'\r\n\r\nconst Button = ({handleClick,text}) => {\r\n    return (\r\n    <button onClick={handleClick}>{text}</button>\r\n    )\r\n}\r\n\r\nexport default Button","import React from 'react'\r\n\r\nconst Notification = ({ message,flag}) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n    if(flag){\r\n        return (\r\n            <div className=\"information\">\r\n              {message}\r\n            </div>\r\n          )\r\n    }\r\n    return (\r\n        <div className=\"error\">\r\n          {message}\r\n        </div>\r\n      )\r\n  }\r\n\r\nexport default Notification","import React, { useState,useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport personService from './services/persons'\r\nimport Button from './components/Button'\r\nimport Notification from './components/Notification'\r\n\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]) \r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [filter, setFilter] = useState('')\r\n  const [found, setFound] = useState(persons)\r\n  const [message, setMessage] = useState(null)\r\n  const [flag,setFlag] = useState(false)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n\r\n  const addPhoneBook = (event) => {\r\n    event.preventDefault(); //Prevent the default action which reloads the page every time you click the button\r\n    try {\r\n      const personObject = {\r\n        name: newName,\r\n        number: newNumber\r\n      }\r\n      if (newName===\"\" || newNumber===\"\") throw new Error()\r\n      const duplicate = persons.find(person => person.name === newName)\r\n      if (duplicate) {\r\n        console.log(duplicate)\r\n        let result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one`)\r\n        if(result){ \r\n          personService\r\n            .update(duplicate.id,personObject)\r\n            .then(returnedPerson=> {\r\n              setPersons(persons.map(person=> person.id!==duplicate.id?person:returnedPerson))\r\n            })\r\n            .catch(error => {\r\n              setFlag(false)\r\n              setMessage(\r\n                `Information of ${duplicate.name} has already been removed from server`\r\n              )              \r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 3000)\r\n            })\r\n        }\r\n\r\n      } else {\r\n          personService\r\n            .create(personObject)\r\n            .then(createdPerson => {\r\n              setPersons(persons.concat(createdPerson))\r\n              setFlag(true)\r\n              setMessage(`Added ${newName}`)\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 3000)\r\n              setNewName('')\r\n              setNewNumber('')\r\n            })\r\n            .catch(error1=>{\r\n              // this is the way to access the error message\r\n              setFlag(false)\r\n              setMessage(error1.response.data.error)\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 3000)\r\n            })\r\n        }\r\n\r\n    } catch (error) {\r\n      setFlag(false)\r\n      setMessage(`missing information`)\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 3000)\r\n    }     \r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n      setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilter = (event) => {\r\n        const re = new RegExp(\"(\"+filter+\")w*\",\"gi\")    //using regex expression to find the right answer\r\n\r\n        console.log(event.target.value)\r\n\r\n        setFilter(event.target.value)\r\n        setFound(persons.filter(person => \r\n          person.name.match(re) || person.number.match(re)\r\n          ))\r\n        console.log(found)\r\n    }\r\n\r\n  const chosenList = filter==='' ? persons : found\r\n  \r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n        <Notification message={message} flag={flag} />\r\n        <Filter filter={filter} handleFilter={handleFilter} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm addPhoneBook={addPhoneBook} \r\n                  newName={newName} \r\n                  handleNameChange={handleNameChange} \r\n                  newNumber={newNumber} \r\n                  handleNumberChange={handleNumberChange} \r\n      />\r\n      <h3>Numbers</h3>\r\n      <ul>{chosenList.map(person =>\r\n          <li key={person.id}>{person.name} {person.number}\r\n              <Button handleClick={()=>{\r\n                  let initialPersons = person.id\r\n                  let result =  window.confirm(`Delete ${person.name} ?`)\r\n                  if(result){\r\n                    personService\r\n                    .remove(person.id)\r\n                    .then(\r\n                        setPersons(persons.filter(person=>person.id !== initialPersons)))\r\n                    }             \r\n                  }\r\n                } text='delete' />\r\n          </li>\r\n          )}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}